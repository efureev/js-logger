{"version":3,"file":"index.js","names":["ConsoleDriver","console","msg","perform","type","lines","buildStrings","formatMessage","_returnResult","output","fmt","fmtStr","fmtArgs","getBlocks","forEach","block","formatBlock","str","args","push","getText","strStyle","style","getStyle","keyStyle"],"sources":["../../../../src/drivers/ConsoleDriver/index.ts"],"sourcesContent":["import Message from '../../Message'\nimport MessageBlock from '../../MessageBlock'\nimport { LoggerDriver } from '../LoggerDriver'\n\nexport interface FormatConsole {\n  fmtStr: string\n  fmtArgs: Array<string>\n}\n\nclass ConsoleDriver implements LoggerDriver {\n  protected _returnResult: boolean = false\n  protected output: Console = console\n\n  debug(msg: Message): string[] | void {\n    return this.perform(msg, 'debug')\n  }\n\n  info(msg: Message): string[] | void {\n    return this.perform(msg, 'info')\n  }\n\n  log(msg: Message): string[] | void {\n    return this.perform(msg, 'log')\n  }\n\n  error(msg: Message): string[] | void {\n    return this.perform(msg, 'error')\n  }\n\n  trace(msg: Message): string[] | void {\n    return this.perform(msg, 'trace')\n  }\n\n  protected perform(msg: Message, type: string): string[] | void {\n    const lines = ConsoleDriver.buildStrings(ConsoleDriver.formatMessage(msg))\n\n    if (!this._returnResult) {\n      // @ts-ignore\n      this.output[type](...lines)\n      return\n    }\n\n    this._returnResult = false\n    return lines\n  }\n\n  public returnResult(): this {\n    this._returnResult = true\n\n    return this\n  }\n\n  protected static buildStrings(fmt: FormatConsole): Array<string> {\n    return [fmt.fmtStr, ...fmt.fmtArgs]\n  }\n\n  protected static formatMessage(msg: Message): FormatConsole {\n    let fmtStr: string = ''\n    const fmtArgs: Array<string> = []\n\n    msg.getBlocks().forEach(block => {\n      const { fmtStr: str, fmtArgs: args } = ConsoleDriver.formatBlock(block)\n      fmtStr += str\n      fmtArgs.push(...args)\n    })\n\n    return { fmtStr, fmtArgs }\n  }\n\n  protected static formatBlock(block: MessageBlock): FormatConsole {\n    let fmtStr: string = `%c${block.getText()}`\n    const fmtArgs: Array<string> = []\n    let strStyle = ''\n\n    const style = block.getStyle()\n    for (const keyStyle in style) {\n      strStyle += `${keyStyle}:${style[keyStyle]};`\n    }\n    fmtArgs.push(strStyle)\n\n    return { fmtStr, fmtArgs }\n  }\n}\n\nexport default ConsoleDriver\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;IASMA,a;;;;2CAC+B,K;;oCACPC,O;;;;;WAE5B,eAAMC,GAAN,EAAqC;MACnC,OAAO,KAAKC,OAAL,CAAaD,GAAb,EAAkB,OAAlB,CAAP;IACD;;;WAED,cAAKA,GAAL,EAAoC;MAClC,OAAO,KAAKC,OAAL,CAAaD,GAAb,EAAkB,MAAlB,CAAP;IACD;;;WAED,aAAIA,GAAJ,EAAmC;MACjC,OAAO,KAAKC,OAAL,CAAaD,GAAb,EAAkB,KAAlB,CAAP;IACD;;;WAED,eAAMA,GAAN,EAAqC;MACnC,OAAO,KAAKC,OAAL,CAAaD,GAAb,EAAkB,OAAlB,CAAP;IACD;;;WAED,eAAMA,GAAN,EAAqC;MACnC,OAAO,KAAKC,OAAL,CAAaD,GAAb,EAAkB,OAAlB,CAAP;IACD;;;WAED,iBAAkBA,GAAlB,EAAgCE,IAAhC,EAA+D;MAC7D,IAAMC,KAAK,GAAGL,aAAa,CAACM,YAAd,CAA2BN,aAAa,CAACO,aAAd,CAA4BL,GAA5B,CAA3B,CAAd;;MAEA,IAAI,CAAC,KAAKM,aAAV,EAAyB;QAAA;;QACvB;QACA,qBAAKC,MAAL,EAAYL,IAAZ,yCAAqBC,KAArB;;QACA;MACD;;MAED,KAAKG,aAAL,GAAqB,KAArB;MACA,OAAOH,KAAP;IACD;;;WAED,wBAA4B;MAC1B,KAAKG,aAAL,GAAqB,IAArB;MAEA,OAAO,IAAP;IACD;;;WAED,sBAA8BE,GAA9B,EAAiE;MAC/D,QAAQA,GAAG,CAACC,MAAZ,4BAAuBD,GAAG,CAACE,OAA3B;IACD;;;WAED,uBAA+BV,GAA/B,EAA4D;MAC1D,IAAIS,MAAc,GAAG,EAArB;MACA,IAAMC,OAAsB,GAAG,EAA/B;MAEAV,GAAG,CAACW,SAAJ,GAAgBC,OAAhB,CAAwB,UAAAC,KAAK,EAAI;QAC/B,4BAAuCf,aAAa,CAACgB,WAAd,CAA0BD,KAA1B,CAAvC;QAAA,IAAgBE,GAAhB,yBAAQN,MAAR;QAAA,IAA8BO,IAA9B,yBAAqBN,OAArB;;QACAD,MAAM,IAAIM,GAAV;QACAL,OAAO,CAACO,IAAR,OAAAP,OAAO,qBAASM,IAAT,EAAP;MACD,CAJD;MAMA,OAAO;QAAEP,MAAM,EAANA,MAAF;QAAUC,OAAO,EAAPA;MAAV,CAAP;IACD;;;WAED,qBAA6BG,KAA7B,EAAiE;MAC/D,IAAIJ,MAAc,eAAQI,KAAK,CAACK,OAAN,EAAR,CAAlB;MACA,IAAMR,OAAsB,GAAG,EAA/B;MACA,IAAIS,QAAQ,GAAG,EAAf;MAEA,IAAMC,KAAK,GAAGP,KAAK,CAACQ,QAAN,EAAd;;MACA,KAAK,IAAMC,QAAX,IAAuBF,KAAvB,EAA8B;QAC5BD,QAAQ,cAAOG,QAAP,cAAmBF,KAAK,CAACE,QAAD,CAAxB,MAAR;MACD;;MACDZ,OAAO,CAACO,IAAR,CAAaE,QAAb;MAEA,OAAO;QAAEV,MAAM,EAANA,MAAF;QAAUC,OAAO,EAAPA;MAAV,CAAP;IACD;;;;;;eAGYZ,a"}