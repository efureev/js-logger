{"version":3,"file":"index.js","names":["ConsoleDriver","console","msg","perform","output","groupEnd","type","lines","buildStrings","formatMessage","performLines","_returnResult","log","fmt","fmtStr","fmtArgs","getBlocks","forEach","block","formatBlock","str","args","push","getText","strStyle","style","getStyle","keyStyle"],"sources":["../../../../src/drivers/ConsoleDriver/index.ts"],"sourcesContent":["import Message from '../../Message'\nimport MessageBlock from '../../MessageBlock'\nimport { LoggerDriver } from '../LoggerDriver'\n\nexport interface FormatConsole {\n  fmtStr: string\n  fmtArgs: Array<string>\n}\n\nclass ConsoleDriver implements LoggerDriver {\n  protected _returnResult: boolean = false\n  protected output: Console = console\n\n  debug(msg: Message): string[] | void {\n    return this.perform(msg, 'debug')\n  }\n\n  info(msg: Message): string[] | void {\n    return this.perform(msg, 'info')\n  }\n\n  log(msg: Message): string[] | void {\n    return this.perform(msg, 'log')\n  }\n\n  error(msg: Message): string[] | void {\n    return this.perform(msg, 'error')\n  }\n\n  trace(msg: Message): string[] | void {\n    return this.perform(msg, 'trace')\n  }\n\n  groupCollapsed(msg: Message): string[] | void {\n    return this.perform(msg, 'groupCollapsed')\n  }\n\n  groupEnd(): void {\n    return this.output.groupEnd()\n  }\n\n  protected perform(msg: Message, type: string): string[] | void {\n    const lines = ConsoleDriver.buildStrings(ConsoleDriver.formatMessage(msg))\n\n    return this.performLines(lines, type)\n  }\n\n\n  public performLines(lines: string[], type: string): string[] | void {\n    if (!this._returnResult) {\n      // @ts-ignore\n      this.output[type] ? this.output[type](...lines) : this.output.log(...lines)\n      return\n    }\n\n    this._returnResult = false\n    return lines\n  }\n\n  public returnResult(): this {\n    this._returnResult = true\n\n    return this\n  }\n\n  protected static buildStrings(fmt: FormatConsole): Array<string> {\n    return [fmt.fmtStr, ...fmt.fmtArgs]\n  }\n\n  protected static formatMessage(msg: Message): FormatConsole {\n    let fmtStr: string = ''\n    const fmtArgs: Array<string> = []\n\n    msg.getBlocks().forEach(block => {\n      const { fmtStr: str, fmtArgs: args } = ConsoleDriver.formatBlock(block)\n      fmtStr += str\n      fmtArgs.push(...args)\n    })\n\n    return { fmtStr, fmtArgs }\n  }\n\n  protected static formatBlock(block: MessageBlock): FormatConsole {\n    let fmtStr: string = `%c${block.getText()}`\n    const fmtArgs: Array<string> = []\n    let strStyle = ''\n\n    const style = block.getStyle()\n    for (const keyStyle in style) {\n      strStyle += `${keyStyle}:${style[keyStyle]};`\n    }\n    fmtArgs.push(strStyle)\n\n    return { fmtStr, fmtArgs }\n  }\n}\n\nexport default ConsoleDriver\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;IASMA,a;;;;2CAC+B,K;;oCACPC,O;;;;;WAE5B,eAAMC,GAAN,EAAqC;MACnC,OAAO,KAAKC,OAAL,CAAaD,GAAb,EAAkB,OAAlB,CAAP;IACD;;;WAED,cAAKA,GAAL,EAAoC;MAClC,OAAO,KAAKC,OAAL,CAAaD,GAAb,EAAkB,MAAlB,CAAP;IACD;;;WAED,aAAIA,GAAJ,EAAmC;MACjC,OAAO,KAAKC,OAAL,CAAaD,GAAb,EAAkB,KAAlB,CAAP;IACD;;;WAED,eAAMA,GAAN,EAAqC;MACnC,OAAO,KAAKC,OAAL,CAAaD,GAAb,EAAkB,OAAlB,CAAP;IACD;;;WAED,eAAMA,GAAN,EAAqC;MACnC,OAAO,KAAKC,OAAL,CAAaD,GAAb,EAAkB,OAAlB,CAAP;IACD;;;WAED,wBAAeA,GAAf,EAA8C;MAC5C,OAAO,KAAKC,OAAL,CAAaD,GAAb,EAAkB,gBAAlB,CAAP;IACD;;;WAED,oBAAiB;MACf,OAAO,KAAKE,MAAL,CAAYC,QAAZ,EAAP;IACD;;;WAED,iBAAkBH,GAAlB,EAAgCI,IAAhC,EAA+D;MAC7D,IAAMC,KAAK,GAAGP,aAAa,CAACQ,YAAd,CAA2BR,aAAa,CAACS,aAAd,CAA4BP,GAA5B,CAA3B,CAAd;MAEA,OAAO,KAAKQ,YAAL,CAAkBH,KAAlB,EAAyBD,IAAzB,CAAP;IACD;;;WAGD,sBAAoBC,KAApB,EAAqCD,IAArC,EAAoE;MAClE,IAAI,CAAC,KAAKK,aAAV,EAAyB;QAAA;;QACvB;QACA,KAAKP,MAAL,CAAYE,IAAZ,IAAoB,qBAAKF,MAAL,EAAYE,IAAZ,yCAAqBC,KAArB,EAApB,GAAkD,sBAAKH,MAAL,EAAYQ,GAAZ,yCAAmBL,KAAnB,EAAlD;QACA;MACD;;MAED,KAAKI,aAAL,GAAqB,KAArB;MACA,OAAOJ,KAAP;IACD;;;WAED,wBAA4B;MAC1B,KAAKI,aAAL,GAAqB,IAArB;MAEA,OAAO,IAAP;IACD;;;WAED,sBAA8BE,GAA9B,EAAiE;MAC/D,QAAQA,GAAG,CAACC,MAAZ,4BAAuBD,GAAG,CAACE,OAA3B;IACD;;;WAED,uBAA+Bb,GAA/B,EAA4D;MAC1D,IAAIY,MAAc,GAAG,EAArB;MACA,IAAMC,OAAsB,GAAG,EAA/B;MAEAb,GAAG,CAACc,SAAJ,GAAgBC,OAAhB,CAAwB,UAAAC,KAAK,EAAI;QAC/B,4BAAuClB,aAAa,CAACmB,WAAd,CAA0BD,KAA1B,CAAvC;QAAA,IAAgBE,GAAhB,yBAAQN,MAAR;QAAA,IAA8BO,IAA9B,yBAAqBN,OAArB;;QACAD,MAAM,IAAIM,GAAV;QACAL,OAAO,CAACO,IAAR,OAAAP,OAAO,qBAASM,IAAT,EAAP;MACD,CAJD;MAMA,OAAO;QAAEP,MAAM,EAANA,MAAF;QAAUC,OAAO,EAAPA;MAAV,CAAP;IACD;;;WAED,qBAA6BG,KAA7B,EAAiE;MAC/D,IAAIJ,MAAc,eAAQI,KAAK,CAACK,OAAN,EAAR,CAAlB;MACA,IAAMR,OAAsB,GAAG,EAA/B;MACA,IAAIS,QAAQ,GAAG,EAAf;MAEA,IAAMC,KAAK,GAAGP,KAAK,CAACQ,QAAN,EAAd;;MACA,KAAK,IAAMC,QAAX,IAAuBF,KAAvB,EAA8B;QAC5BD,QAAQ,cAAOG,QAAP,cAAmBF,KAAK,CAACE,QAAD,CAAxB,MAAR;MACD;;MACDZ,OAAO,CAACO,IAAR,CAAaE,QAAb;MAEA,OAAO;QAAEV,MAAM,EAANA,MAAF;QAAUC,OAAO,EAAPA;MAAV,CAAP;IACD;;;;;;eAGYf,a"}