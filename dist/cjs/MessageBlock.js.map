{"version":3,"file":"MessageBlock.js","names":["MessageBlock","text","colors","Object","_text","key","value","check","undefined","has","style","push","get","vValue","hValue","marginLeft","marginRight","width","color","url","height","isEmptyObject","JSON","stringify","block","options"],"sources":["../../src/MessageBlock.ts"],"sourcesContent":["import { isEmptyObject } from './utils'\nimport type { ColorValue } from './Color'\nimport ColorCollection from './ColorCollection'\n\nexport interface MessageBlockStyle {\n  [index: string]: any\n\n  color?: ColorValue\n  background?: ColorValue\n}\n\ninterface MessageBlockOptions {\n  colors?: ColorCollection\n}\n\nclass MessageBlock {\n  private colors?: ColorCollection\n  private _text: string\n  private style: MessageBlockStyle = new Object(null)\n\n  constructor(text: string, { colors }: MessageBlockOptions = {}) {\n    this.colors = colors\n    this._text = text\n  }\n\n  push(key: string, value?: string, check: boolean = false): this {\n    if (value !== undefined && (!check || !this.has('color'))) {\n      this.style[key] = value\n    }\n\n    return this\n  }\n\n  has(key: string): boolean {\n    return this.style[key] !== undefined\n  }\n\n  color(value?: string, check: boolean = false): this {\n    return this.push('color', (this.colors && this.colors.get(value)) || value, check)\n  }\n\n  background(value?: string, check: boolean = false): this {\n    return this.push('background', (this.colors && this.colors.get(value)) || value, check)\n  }\n\n  marginLeft(value: number, check: boolean = false): this {\n    if (value != 0) {\n      return this.push('margin-left', `${value}px`, check)\n    }\n    return this\n  }\n\n  marginRight(value: number, check: boolean = false): this {\n    if (value != 0) {\n      return this.push('margin-right', `${value}px`, check)\n    }\n    return this\n  }\n\n  marginTop(value: number, check: boolean = false): this {\n    return this.push('margin-top', `${value}px`, check)\n  }\n\n  marginBottom(value: number, check: boolean = false): this {\n    return this.push('margin-bottom', `${value}px`, check)\n  }\n\n  margin(vValue: number, hValue?: number, check: boolean = false): this {\n    let value = vValue === 0 ? '' : `${vValue}px`\n    if (hValue !== undefined) {\n      value += ` ${hValue}px`\n    }\n    return this.push('margin', value, check)\n  }\n\n  padding(vValue: number, hValue?: number, check: boolean = false): this {\n    let value = vValue === 0 ? '' : `${vValue}px`\n    if (hValue !== undefined) {\n      value += ` ${hValue}px`\n    }\n    return this.push('padding', value, check)\n  }\n\n  offsetLeft(value: number, check: boolean = false): this {\n    return this.marginLeft(value * 10, check)\n  }\n\n  offsetRight(value: number, check: boolean = false): this {\n    return this.marginRight(value * 10, check)\n  }\n\n  borderRadius(value: number, check: boolean = false): this {\n    return this.push('border-radius', `${value}px`, check)\n  }\n\n  border(width: number, style: string, color: ColorValue, check: boolean = false): this {\n    return this.push('border', `${width}px ${style} ${color}`, check)\n  }\n\n  size(value: number, check: boolean = false): this {\n    return this.push('font-size', `${value}px`, check)\n  }\n\n  bold(check: boolean = false): this {\n    return this.push('font-weight', 'bold', check)\n  }\n\n  italic(check: boolean = false): this {\n    return this.push('font-style', 'italic', check)\n  }\n\n  lineHeight(value: number, check: boolean = false): this {\n    return this.push('line-height', `${value}px`, check)\n  }\n\n  width(value?: number, check: boolean = false): this {\n    return value ? this.push('width', `${value}px`, check) : this\n  }\n\n  height(value?: number, check: boolean = false): this {\n    return value ? this.push('height', `${value}px`, check) : this\n  }\n\n  image(url: string, width?: number, height?: number): this {\n    return this.push('background-image', `url(${url}}`).push('background-size', `cover`).width(width).height(height)\n  }\n\n  text(value: string): this {\n    this._text = value\n\n    return this\n  }\n\n  getText(): string {\n    return this._text\n  }\n\n  getStyle(): MessageBlockStyle {\n    return this.style\n  }\n\n  hasStyle(): boolean {\n    return !isEmptyObject(this.style)\n  }\n\n  clearStyle(): this {\n    this.style = new Object(null)\n\n    return this\n  }\n\n  toJSON(): string {\n    return JSON.stringify({\n      _text: this._text,\n      style: this.style,\n    })\n  }\n\n  static instance(block: MessageBlock | string, options: MessageBlockOptions = {}): MessageBlock {\n    return block instanceof MessageBlock ? block : new MessageBlock(block, options)\n  }\n}\n\nexport default MessageBlock\n"],"mappings":"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"}