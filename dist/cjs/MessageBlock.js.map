{"version":3,"file":"MessageBlock.js","names":["MessageBlock","text","Object","colors","undefined","Error","_text","fillFromConfig","key","value","check","has","style","push","get","vValue","hValue","marginLeft","marginRight","width","color","url","height","config","background","bgColor","offset","offsetLeft","borderRadius","bold","italic","fontSize","size","padding","Array","isArray","isEmptyObject","JSON","stringify","block","options"],"sources":["../../src/MessageBlock.ts"],"sourcesContent":["import { isEmptyObject } from './utils'\nimport type { ColorValue } from './Color'\nimport ColorCollection from './ColorCollection'\n\nexport interface MessageBlockStyle {\n  [index: string]: any\n\n  color?: ColorValue\n  background?: ColorValue\n}\n\ninterface MessageBlockOptions {\n  colors?: ColorCollection\n}\n\nexport interface MessageBlockConfig {\n  text: string\n  bgColor?: ColorValue | string\n  bold?: boolean\n  borderRadius?: number\n  color?: ColorValue | string\n  fontSize?: number\n  italic?: boolean\n  offset?: number\n  padding?: number | [number, number]\n}\n\nclass MessageBlock {\n  private _text?: string\n  private readonly colors?: ColorCollection\n  private style: MessageBlockStyle = new Object(null)\n\n  constructor(text: string | MessageBlockConfig, { colors }: MessageBlockOptions = new Object(null)) {\n    this.colors = colors\n    if (text === undefined) {\n      throw Error('Invalid `text` argument for MessageBlock')\n    }\n\n    if (typeof text === 'string') {\n      this._text = text\n    } else {\n      this.fillFromConfig(text)\n    }\n  }\n\n  push(key: string, value?: string, check: boolean = false): this {\n    if (value !== undefined && (!check || !this.has('color'))) {\n      this.style[key] = value\n    }\n\n    return this\n  }\n\n  has(key: string): boolean {\n    return this.style[key] !== undefined\n  }\n\n  color(value?: string, check: boolean = false): this {\n    return this.push('color', (this.colors && this.colors.get(value)) || value, check)\n  }\n\n  background(value?: string, check: boolean = false): this {\n    return this.push('background', (this.colors && this.colors.get(value)) || value, check)\n  }\n\n  marginLeft(value: number, check: boolean = false): this {\n    if (value != 0) {\n      return this.push('margin-left', `${value}px`, check)\n    }\n    return this\n  }\n\n  marginRight(value: number, check: boolean = false): this {\n    if (value != 0) {\n      return this.push('margin-right', `${value}px`, check)\n    }\n    return this\n  }\n\n  marginTop(value: number, check: boolean = false): this {\n    return this.push('margin-top', `${value}px`, check)\n  }\n\n  marginBottom(value: number, check: boolean = false): this {\n    return this.push('margin-bottom', `${value}px`, check)\n  }\n\n  margin(vValue: number, hValue?: number, check: boolean = false): this {\n    let value = vValue === 0 ? '' : `${vValue}px`\n    if (hValue !== undefined) {\n      value += ` ${hValue}px`\n    }\n    return this.push('margin', value, check)\n  }\n\n  padding(vValue: number, hValue?: number, check: boolean = false): this {\n    let value = vValue === 0 ? '' : `${vValue}px`\n    if (hValue !== undefined) {\n      value += ` ${hValue}px`\n    }\n    return this.push('padding', value, check)\n  }\n\n  offsetLeft(value: number, check: boolean = false): this {\n    return this.marginLeft(value * 10, check)\n  }\n\n  offsetRight(value: number, check: boolean = false): this {\n    return this.marginRight(value * 10, check)\n  }\n\n  borderRadius(value: number, check: boolean = false): this {\n    return this.push('border-radius', `${value}px`, check)\n  }\n\n  border(width: number, style: string, color: ColorValue, check: boolean = false): this {\n    return this.push('border', `${width}px ${style} ${color}`, check)\n  }\n\n  size(value: number, check: boolean = false): this {\n    return this.push('font-size', `${value}px`, check)\n  }\n\n  bold(check: boolean = false): this {\n    return this.push('font-weight', 'bold', check)\n  }\n\n  italic(check: boolean = false): this {\n    return this.push('font-style', 'italic', check)\n  }\n\n  lineHeight(value: number, check: boolean = false): this {\n    return this.push('line-height', `${value}px`, check)\n  }\n\n  width(value?: number, check: boolean = false): this {\n    return value ? this.push('width', `${value}px`, check) : this\n  }\n\n  height(value?: number, check: boolean = false): this {\n    return value ? this.push('height', `${value}px`, check) : this\n  }\n\n  image(url: string, width?: number, height?: number): this {\n    return this.push('background-image', `url(${url}}`).push('background-size', `cover`).width(width).height(height)\n  }\n\n  text(value: string): this {\n    this._text = value\n\n    return this\n  }\n\n  getText(): string {\n    return this._text || ''\n  }\n\n  fillFromConfig(config: MessageBlockConfig) {\n    this.text(config.text).background(config.bgColor).color(config.color)\n\n    config.offset && this.offsetLeft(config.offset)\n    config.borderRadius && this.borderRadius(config.borderRadius)\n    config.bold && this.bold()\n    config.italic && this.italic()\n    config.fontSize && this.size(config.fontSize)\n\n    if (config.padding) {\n      if (Array.isArray(config.padding)) {\n        this.padding(config.padding[0], config.padding[1])\n      } else {\n        this.padding(config.padding)\n      }\n    }\n  }\n\n  getStyle(): MessageBlockStyle {\n    return this.style\n  }\n\n  hasStyle(): boolean {\n    return !isEmptyObject(this.style)\n  }\n\n  clearStyle(): this {\n    this.style = new Object(null)\n\n    return this\n  }\n\n  toJSON(): string {\n    return JSON.stringify({\n      _text: this._text,\n      style: this.style,\n    })\n  }\n\n  static instance(\n    block: MessageBlock | MessageBlockConfig | string,\n    options: MessageBlockOptions = new Object(null)\n  ): MessageBlock {\n    return block instanceof MessageBlock ? block : new MessageBlock(block, options)\n  }\n}\n\nexport default MessageBlock\n"],"mappings":";;;;;;;AAAA;;;;;;;;;;IA2BMA,Y;EAKJ,sBAAYC,IAAZ,EAAmG;IAAA,+EAAlB,IAAIC,MAAJ,CAAW,IAAX,CAAkB;IAAA,IAAlDC,MAAkD,QAAlDA,MAAkD;;IAAA;;IAAA,+BAFhE,IAAID,MAAJ,CAAW,IAAX,CAEgE;;IACjG,KAAKC,MAAL,GAAcA,MAAd;;IACA,IAAIF,IAAI,KAAKG,SAAb,EAAwB;MACtB,MAAMC,KAAK,CAAC,0CAAD,CAAX;IACD;;IAED,IAAI,OAAOJ,IAAP,KAAgB,QAApB,EAA8B;MAC5B,KAAKK,KAAL,GAAaL,IAAb;IACD,CAFD,MAEO;MACL,KAAKM,cAAL,CAAoBN,IAApB;IACD;EACF;;;;WAED,cAAKO,GAAL,EAAkBC,KAAlB,EAAgE;MAAA,IAA9BC,KAA8B,uEAAb,KAAa;;MAC9D,IAAID,KAAK,KAAKL,SAAV,KAAwB,CAACM,KAAD,IAAU,CAAC,KAAKC,GAAL,CAAS,OAAT,CAAnC,CAAJ,EAA2D;QACzD,KAAKC,KAAL,CAAWJ,GAAX,IAAkBC,KAAlB;MACD;;MAED,OAAO,IAAP;IACD;;;WAED,aAAID,GAAJ,EAA0B;MACxB,OAAO,KAAKI,KAAL,CAAWJ,GAAX,MAAoBJ,SAA3B;IACD;;;WAED,eAAMK,KAAN,EAAoD;MAAA,IAA9BC,KAA8B,uEAAb,KAAa;MAClD,OAAO,KAAKG,IAAL,CAAU,OAAV,EAAoB,KAAKV,MAAL,IAAe,KAAKA,MAAL,CAAYW,GAAZ,CAAgBL,KAAhB,CAAhB,IAA2CA,KAA9D,EAAqEC,KAArE,CAAP;IACD;;;WAED,oBAAWD,KAAX,EAAyD;MAAA,IAA9BC,KAA8B,uEAAb,KAAa;MACvD,OAAO,KAAKG,IAAL,CAAU,YAAV,EAAyB,KAAKV,MAAL,IAAe,KAAKA,MAAL,CAAYW,GAAZ,CAAgBL,KAAhB,CAAhB,IAA2CA,KAAnE,EAA0EC,KAA1E,CAAP;IACD;;;WAED,oBAAWD,KAAX,EAAwD;MAAA,IAA9BC,KAA8B,uEAAb,KAAa;;MACtD,IAAID,KAAK,IAAI,CAAb,EAAgB;QACd,OAAO,KAAKI,IAAL,CAAU,aAAV,YAA4BJ,KAA5B,SAAuCC,KAAvC,CAAP;MACD;;MACD,OAAO,IAAP;IACD;;;WAED,qBAAYD,KAAZ,EAAyD;MAAA,IAA9BC,KAA8B,uEAAb,KAAa;;MACvD,IAAID,KAAK,IAAI,CAAb,EAAgB;QACd,OAAO,KAAKI,IAAL,CAAU,cAAV,YAA6BJ,KAA7B,SAAwCC,KAAxC,CAAP;MACD;;MACD,OAAO,IAAP;IACD;;;WAED,mBAAUD,KAAV,EAAuD;MAAA,IAA9BC,KAA8B,uEAAb,KAAa;MACrD,OAAO,KAAKG,IAAL,CAAU,YAAV,YAA2BJ,KAA3B,SAAsCC,KAAtC,CAAP;IACD;;;WAED,sBAAaD,KAAb,EAA0D;MAAA,IAA9BC,KAA8B,uEAAb,KAAa;MACxD,OAAO,KAAKG,IAAL,CAAU,eAAV,YAA8BJ,KAA9B,SAAyCC,KAAzC,CAAP;IACD;;;WAED,gBAAOK,MAAP,EAAuBC,MAAvB,EAAsE;MAAA,IAA9BN,KAA8B,uEAAb,KAAa;MACpE,IAAID,KAAK,GAAGM,MAAM,KAAK,CAAX,GAAe,EAAf,aAAuBA,MAAvB,OAAZ;;MACA,IAAIC,MAAM,KAAKZ,SAAf,EAA0B;QACxBK,KAAK,eAAQO,MAAR,OAAL;MACD;;MACD,OAAO,KAAKH,IAAL,CAAU,QAAV,EAAoBJ,KAApB,EAA2BC,KAA3B,CAAP;IACD;;;WAED,iBAAQK,MAAR,EAAwBC,MAAxB,EAAuE;MAAA,IAA9BN,KAA8B,uEAAb,KAAa;MACrE,IAAID,KAAK,GAAGM,MAAM,KAAK,CAAX,GAAe,EAAf,aAAuBA,MAAvB,OAAZ;;MACA,IAAIC,MAAM,KAAKZ,SAAf,EAA0B;QACxBK,KAAK,eAAQO,MAAR,OAAL;MACD;;MACD,OAAO,KAAKH,IAAL,CAAU,SAAV,EAAqBJ,KAArB,EAA4BC,KAA5B,CAAP;IACD;;;WAED,oBAAWD,KAAX,EAAwD;MAAA,IAA9BC,KAA8B,uEAAb,KAAa;MACtD,OAAO,KAAKO,UAAL,CAAgBR,KAAK,GAAG,EAAxB,EAA4BC,KAA5B,CAAP;IACD;;;WAED,qBAAYD,KAAZ,EAAyD;MAAA,IAA9BC,KAA8B,uEAAb,KAAa;MACvD,OAAO,KAAKQ,WAAL,CAAiBT,KAAK,GAAG,EAAzB,EAA6BC,KAA7B,CAAP;IACD;;;WAED,sBAAaD,KAAb,EAA0D;MAAA,IAA9BC,KAA8B,uEAAb,KAAa;MACxD,OAAO,KAAKG,IAAL,CAAU,eAAV,YAA8BJ,KAA9B,SAAyCC,KAAzC,CAAP;IACD;;;WAED,gBAAOS,KAAP,EAAsBP,KAAtB,EAAqCQ,KAArC,EAAsF;MAAA,IAA9BV,KAA8B,uEAAb,KAAa;MACpF,OAAO,KAAKG,IAAL,CAAU,QAAV,YAAuBM,KAAvB,gBAAkCP,KAAlC,cAA2CQ,KAA3C,GAAoDV,KAApD,CAAP;IACD;;;WAED,cAAKD,KAAL,EAAkD;MAAA,IAA9BC,KAA8B,uEAAb,KAAa;MAChD,OAAO,KAAKG,IAAL,CAAU,WAAV,YAA0BJ,KAA1B,SAAqCC,KAArC,CAAP;IACD;;;WAED,gBAAmC;MAAA,IAA9BA,KAA8B,uEAAb,KAAa;MACjC,OAAO,KAAKG,IAAL,CAAU,aAAV,EAAyB,MAAzB,EAAiCH,KAAjC,CAAP;IACD;;;WAED,kBAAqC;MAAA,IAA9BA,KAA8B,uEAAb,KAAa;MACnC,OAAO,KAAKG,IAAL,CAAU,YAAV,EAAwB,QAAxB,EAAkCH,KAAlC,CAAP;IACD;;;WAED,oBAAWD,KAAX,EAAwD;MAAA,IAA9BC,KAA8B,uEAAb,KAAa;MACtD,OAAO,KAAKG,IAAL,CAAU,aAAV,YAA4BJ,KAA5B,SAAuCC,KAAvC,CAAP;IACD;;;WAED,eAAMD,KAAN,EAAoD;MAAA,IAA9BC,KAA8B,uEAAb,KAAa;MAClD,OAAOD,KAAK,GAAG,KAAKI,IAAL,CAAU,OAAV,YAAsBJ,KAAtB,SAAiCC,KAAjC,CAAH,GAA6C,IAAzD;IACD;;;WAED,gBAAOD,KAAP,EAAqD;MAAA,IAA9BC,KAA8B,uEAAb,KAAa;MACnD,OAAOD,KAAK,GAAG,KAAKI,IAAL,CAAU,QAAV,YAAuBJ,KAAvB,SAAkCC,KAAlC,CAAH,GAA8C,IAA1D;IACD;;;WAED,eAAMW,GAAN,EAAmBF,KAAnB,EAAmCG,MAAnC,EAA0D;MACxD,OAAO,KAAKT,IAAL,CAAU,kBAAV,gBAAqCQ,GAArC,QAA6CR,IAA7C,CAAkD,iBAAlD,WAA8EM,KAA9E,CAAoFA,KAApF,EAA2FG,MAA3F,CAAkGA,MAAlG,CAAP;IACD;;;WAED,cAAKb,KAAL,EAA0B;MACxB,KAAKH,KAAL,GAAaG,KAAb;MAEA,OAAO,IAAP;IACD;;;WAED,mBAAkB;MAChB,OAAO,KAAKH,KAAL,IAAc,EAArB;IACD;;;WAED,wBAAeiB,MAAf,EAA2C;MACzC,KAAKtB,IAAL,CAAUsB,MAAM,CAACtB,IAAjB,EAAuBuB,UAAvB,CAAkCD,MAAM,CAACE,OAAzC,EAAkDL,KAAlD,CAAwDG,MAAM,CAACH,KAA/D;MAEAG,MAAM,CAACG,MAAP,IAAiB,KAAKC,UAAL,CAAgBJ,MAAM,CAACG,MAAvB,CAAjB;MACAH,MAAM,CAACK,YAAP,IAAuB,KAAKA,YAAL,CAAkBL,MAAM,CAACK,YAAzB,CAAvB;MACAL,MAAM,CAACM,IAAP,IAAe,KAAKA,IAAL,EAAf;MACAN,MAAM,CAACO,MAAP,IAAiB,KAAKA,MAAL,EAAjB;MACAP,MAAM,CAACQ,QAAP,IAAmB,KAAKC,IAAL,CAAUT,MAAM,CAACQ,QAAjB,CAAnB;;MAEA,IAAIR,MAAM,CAACU,OAAX,EAAoB;QAClB,IAAIC,KAAK,CAACC,OAAN,CAAcZ,MAAM,CAACU,OAArB,CAAJ,EAAmC;UACjC,KAAKA,OAAL,CAAaV,MAAM,CAACU,OAAP,CAAe,CAAf,CAAb,EAAgCV,MAAM,CAACU,OAAP,CAAe,CAAf,CAAhC;QACD,CAFD,MAEO;UACL,KAAKA,OAAL,CAAaV,MAAM,CAACU,OAApB;QACD;MACF;IACF;;;WAED,oBAA8B;MAC5B,OAAO,KAAKrB,KAAZ;IACD;;;WAED,oBAAoB;MAClB,OAAO,CAAC,IAAAwB,oBAAA,EAAc,KAAKxB,KAAnB,CAAR;IACD;;;WAED,sBAAmB;MACjB,KAAKA,KAAL,GAAa,IAAIV,MAAJ,CAAW,IAAX,CAAb;MAEA,OAAO,IAAP;IACD;;;WAED,kBAAiB;MACf,OAAOmC,IAAI,CAACC,SAAL,CAAe;QACpBhC,KAAK,EAAE,KAAKA,KADQ;QAEpBM,KAAK,EAAE,KAAKA;MAFQ,CAAf,CAAP;IAID;;;WAED,kBACE2B,KADF,EAGgB;MAAA,IADdC,OACc,uEADiB,IAAItC,MAAJ,CAAW,IAAX,CACjB;MACd,OAAOqC,KAAK,YAAYvC,YAAjB,GAAgCuC,KAAhC,GAAwC,IAAIvC,YAAJ,CAAiBuC,KAAjB,EAAwBC,OAAxB,CAA/C;IACD;;;;;;eAGYxC,Y"}