{"version":3,"sources":["../../src/Logger.ts"],"names":["LEVEL_DEBUG","LEVEL_ERROR","LEVEL_INFO","LEVEL_TRACE","Message","MessageBlock","Logger","logLevel","constructor","config","driver","level","setLevel","getDriver","shouldLog","msgLevel","log","msgText","prefix","offset","buildMessage","info","msg","debug","error","trace","block","paddingLeft","pushBlock","instance"],"mappings":"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","sourcesContent":["import { LoggerDriver } from './drivers/LoggerDriver'\nimport { LEVEL_DEBUG, LEVEL_ERROR, LEVEL_INFO, LEVEL_TRACE } from './LogLevel'\nimport Message from './Message'\nimport MessageBlock from './MessageBlock'\n\nexport interface LoggerConfig {\n  driver: LoggerDriver\n  level?: number\n}\n\nclass Logger {\n  private readonly driver: LoggerDriver\n  private logLevel: number = LEVEL_ERROR\n\n  constructor(config: LoggerConfig) {\n    this.driver = config.driver\n    if (config.level) {\n      this.logLevel = config.level\n    }\n  }\n\n  setLevel(level: number): void {\n    this.logLevel = level\n  }\n\n  public getDriver(): LoggerDriver {\n    return this.driver\n  }\n\n  private shouldLog(msgLevel: number) {\n    return this.logLevel <= msgLevel // @todo: bit operations\n  }\n\n  log(msgText: string | Message | MessageBlock, prefix?: string, offset = 0): void {\n    this.driver.log(Logger.buildMessage(msgText, prefix, offset))\n  }\n\n  info(msgText: string | Message | MessageBlock, prefix?: string, offset = 0): void {\n    if (!this.shouldLog(LEVEL_INFO)) {\n      return\n    }\n\n    const msg = Logger.buildMessage(msgText, prefix, offset)\n\n    this.driver.info(msg)\n  }\n\n  debug(msgText: string | Message | MessageBlock, prefix?: string, offset = 0) {\n    if (!this.shouldLog(LEVEL_DEBUG)) {\n      return\n    }\n\n    this.driver.debug(Logger.buildMessage(msgText, prefix, offset))\n  }\n\n  error(msgText: string | Message | MessageBlock, prefix?: string, offset = 0) {\n    if (!this.shouldLog(LEVEL_ERROR)) {\n      return\n    }\n\n    this.driver.error(Logger.buildMessage(msgText, prefix, offset))\n  }\n\n  trace(msgText: string | Message | MessageBlock, prefix?: string, offset = 0) {\n    if (!this.shouldLog(LEVEL_TRACE)) {\n      return\n    }\n\n    this.driver.trace(Logger.buildMessage(msgText, prefix, offset))\n  }\n\n  private static buildMessage(msgText: string | Message | MessageBlock, prefix?: string, offset: number = 0): Message {\n    if (msgText instanceof Message) {\n      return msgText\n    }\n\n    const msg = new Message()\n\n    if (prefix) {\n      const block = new MessageBlock(prefix)\n      if (offset) {\n        block.paddingLeft(offset)\n      }\n\n      msg.pushBlock(block)\n    }\n\n    msg.pushBlock(MessageBlock.instance(msgText))\n\n    return msg\n  }\n}\n\nexport default Logger\n"],"file":"Logger.js"}