{"version":3,"file":"MessageBlock.js","names":["isEmptyObject","MessageBlock","style","Object","constructor","text","colors","undefined","Error","_text","fillFromConfig","config","background","bgColor","color","offset","offsetLeft","borderRadius","padding","Array","isArray","push","key","value","check","has","get","marginLeft","marginRight","marginTop","marginBottom","margin","vValue","hValue","offsetRight","border","width","size","bold","italic","lineHeight","height","image","url","getText","getStyle","hasStyle","clearStyle","toJSON","JSON","stringify","instance","block","options"],"sources":["../../src/MessageBlock.ts"],"sourcesContent":["import { isEmptyObject } from './utils'\nimport type { ColorValue } from './Color'\nimport ColorCollection from './ColorCollection'\n\nexport interface MessageBlockStyle {\n  [index: string]: any\n\n  color?: ColorValue\n  background?: ColorValue\n}\n\ninterface MessageBlockOptions {\n  colors?: ColorCollection\n}\n\nexport interface MessageBlockConfig {\n  text: string\n  bgColor?: ColorValue | string\n  color?: ColorValue | string\n  offset?: number\n  borderRadius?: number\n  padding?: number | [number, number]\n}\n\nclass MessageBlock {\n  private _text: string\n  private readonly colors?: ColorCollection\n  private style: MessageBlockStyle = new Object(null)\n\n  constructor(text: string | MessageBlockConfig, { colors }: MessageBlockOptions = new Object(null)) {\n    this.colors = colors\n    if (text === undefined) {\n      throw Error('Invalid `text` argument for MessageBlock')\n    }\n\n    if (typeof text === 'string') {\n      this._text = text\n    } else {\n      this.fillFromConfig(text)\n    }\n  }\n\n  fillFromConfig(config: MessageBlockConfig) {\n    this.text(config.text).background(config.bgColor).color(config.color)\n\n    config.offset && this.offsetLeft(config.offset)\n    config.borderRadius && this.borderRadius(config.borderRadius)\n\n    if (config.padding) {\n      if (Array.isArray(config.padding)) {\n        this.padding(config.padding[0], config.padding[1])\n      } else {\n        this.padding(config.padding)\n      }\n    }\n  }\n\n  push(key: string, value?: string, check: boolean = false): this {\n    if (value !== undefined && (!check || !this.has('color'))) {\n      this.style[key] = value\n    }\n\n    return this\n  }\n\n  has(key: string): boolean {\n    return this.style[key] !== undefined\n  }\n\n  color(value?: string, check: boolean = false): this {\n    return this.push('color', (this.colors && this.colors.get(value)) || value, check)\n  }\n\n  background(value?: string, check: boolean = false): this {\n    return this.push('background', (this.colors && this.colors.get(value)) || value, check)\n  }\n\n  marginLeft(value: number, check: boolean = false): this {\n    if (value != 0) {\n      return this.push('margin-left', `${value}px`, check)\n    }\n    return this\n  }\n\n  marginRight(value: number, check: boolean = false): this {\n    if (value != 0) {\n      return this.push('margin-right', `${value}px`, check)\n    }\n    return this\n  }\n\n  marginTop(value: number, check: boolean = false): this {\n    return this.push('margin-top', `${value}px`, check)\n  }\n\n  marginBottom(value: number, check: boolean = false): this {\n    return this.push('margin-bottom', `${value}px`, check)\n  }\n\n  margin(vValue: number, hValue?: number, check: boolean = false): this {\n    let value = vValue === 0 ? '' : `${vValue}px`\n    if (hValue !== undefined) {\n      value += ` ${hValue}px`\n    }\n    return this.push('margin', value, check)\n  }\n\n  padding(vValue: number, hValue?: number, check: boolean = false): this {\n    let value = vValue === 0 ? '' : `${vValue}px`\n    if (hValue !== undefined) {\n      value += ` ${hValue}px`\n    }\n    return this.push('padding', value, check)\n  }\n\n  offsetLeft(value: number, check: boolean = false): this {\n    return this.marginLeft(value * 10, check)\n  }\n\n  offsetRight(value: number, check: boolean = false): this {\n    return this.marginRight(value * 10, check)\n  }\n\n  borderRadius(value: number, check: boolean = false): this {\n    return this.push('border-radius', `${value}px`, check)\n  }\n\n  border(width: number, style: string, color: ColorValue, check: boolean = false): this {\n    return this.push('border', `${width}px ${style} ${color}`, check)\n  }\n\n  size(value: number, check: boolean = false): this {\n    return this.push('font-size', `${value}px`, check)\n  }\n\n  bold(check: boolean = false): this {\n    return this.push('font-weight', 'bold', check)\n  }\n\n  italic(check: boolean = false): this {\n    return this.push('font-style', 'italic', check)\n  }\n\n  lineHeight(value: number, check: boolean = false): this {\n    return this.push('line-height', `${value}px`, check)\n  }\n\n  width(value?: number, check: boolean = false): this {\n    return value ? this.push('width', `${value}px`, check) : this\n  }\n\n  height(value?: number, check: boolean = false): this {\n    return value ? this.push('height', `${value}px`, check) : this\n  }\n\n  image(url: string, width?: number, height?: number): this {\n    return this.push('background-image', `url(${url}}`).push('background-size', `cover`).width(width).height(height)\n  }\n\n  text(value: string): this {\n    this._text = value\n\n    return this\n  }\n\n  getText(): string {\n    return this._text\n  }\n\n  getStyle(): MessageBlockStyle {\n    return this.style\n  }\n\n  hasStyle(): boolean {\n    return !isEmptyObject(this.style)\n  }\n\n  clearStyle(): this {\n    this.style = new Object(null)\n\n    return this\n  }\n\n  toJSON(): string {\n    return JSON.stringify({\n      _text: this._text,\n      style: this.style,\n    })\n  }\n\n  static instance(\n    block: MessageBlock | MessageBlockConfig | string,\n    options: MessageBlockOptions = new Object(null)\n  ): MessageBlock {\n    return block instanceof MessageBlock ? block : new MessageBlock(block, options)\n  }\n}\n\nexport default MessageBlock\n"],"mappings":"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"}