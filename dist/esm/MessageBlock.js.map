{"version":3,"file":"MessageBlock.js","names":["isEmptyObject","MessageBlock","style","Object","constructor","text","colors","_text","push","key","value","check","undefined","has","color","get","background","marginLeft","marginRight","marginTop","marginBottom","margin","vValue","hValue","padding","offsetLeft","offsetRight","borderRadius","border","width","size","bold","italic","lineHeight","height","image","url","getText","getStyle","hasStyle","clearStyle","toJSON","JSON","stringify","instance","block","options"],"sources":["../../src/MessageBlock.ts"],"sourcesContent":["import { isEmptyObject } from './utils'\nimport type { ColorValue } from './Color'\nimport ColorCollection from './ColorCollection'\n\nexport interface MessageBlockStyle {\n  [index: string]: any\n\n  color?: ColorValue\n  background?: ColorValue\n}\n\ninterface MessageBlockOptions {\n  colors?: ColorCollection\n}\n\nclass MessageBlock {\n  private colors?: ColorCollection\n  private _text: string\n  private style: MessageBlockStyle = new Object(null)\n\n  constructor(text: string, { colors }: MessageBlockOptions = {}) {\n    this.colors = colors\n    this._text = text\n  }\n\n  push(key: string, value?: string, check: boolean = false): this {\n    if (value !== undefined && (!check || !this.has('color'))) {\n      this.style[key] = value\n    }\n\n    return this\n  }\n\n  has(key: string): boolean {\n    return this.style[key] !== undefined\n  }\n\n  color(value?: string, check: boolean = false): this {\n    return this.push('color', (this.colors && this.colors.get(value)) || value, check)\n  }\n\n  background(value?: string, check: boolean = false): this {\n    return this.push('background', (this.colors && this.colors.get(value)) || value, check)\n  }\n\n  marginLeft(value: number, check: boolean = false): this {\n    if (value != 0) {\n      return this.push('margin-left', `${value}px`, check)\n    }\n    return this\n  }\n\n  marginRight(value: number, check: boolean = false): this {\n    if (value != 0) {\n      return this.push('margin-right', `${value}px`, check)\n    }\n    return this\n  }\n\n  marginTop(value: number, check: boolean = false): this {\n    return this.push('margin-top', `${value}px`, check)\n  }\n\n  marginBottom(value: number, check: boolean = false): this {\n    return this.push('margin-bottom', `${value}px`, check)\n  }\n\n  margin(vValue: number, hValue?: number, check: boolean = false): this {\n    let value = vValue === 0 ? '' : `${vValue}px`\n    if (hValue !== undefined) {\n      value += ` ${hValue}px`\n    }\n    return this.push('margin', value, check)\n  }\n\n  padding(vValue: number, hValue?: number, check: boolean = false): this {\n    let value = vValue === 0 ? '' : `${vValue}px`\n    if (hValue !== undefined) {\n      value += ` ${hValue}px`\n    }\n    return this.push('padding', value, check)\n  }\n\n  offsetLeft(value: number, check: boolean = false): this {\n    return this.marginLeft(value * 10, check)\n  }\n\n  offsetRight(value: number, check: boolean = false): this {\n    return this.marginRight(value * 10, check)\n  }\n\n  borderRadius(value: number, check: boolean = false): this {\n    return this.push('border-radius', `${value}px`, check)\n  }\n\n  border(width: number, style: string, color: ColorValue, check: boolean = false): this {\n    return this.push('border', `${width}px ${style} ${color}`, check)\n  }\n\n  size(value: number, check: boolean = false): this {\n    return this.push('font-size', `${value}px`, check)\n  }\n\n  bold(check: boolean = false): this {\n    return this.push('font-weight', 'bold', check)\n  }\n\n  italic(check: boolean = false): this {\n    return this.push('font-style', 'italic', check)\n  }\n\n  lineHeight(value: number, check: boolean = false): this {\n    return this.push('line-height', `${value}px`, check)\n  }\n\n  width(value?: number, check: boolean = false): this {\n    return value ? this.push('width', `${value}px`, check) : this\n  }\n\n  height(value?: number, check: boolean = false): this {\n    return value ? this.push('height', `${value}px`, check) : this\n  }\n\n  image(url: string, width?: number, height?: number): this {\n    return this.push('background-image', `url(${url}}`).push('background-size', `cover`).width(width).height(height)\n  }\n\n  text(value: string): this {\n    this._text = value\n\n    return this\n  }\n\n  getText(): string {\n    return this._text\n  }\n\n  getStyle(): MessageBlockStyle {\n    return this.style\n  }\n\n  hasStyle(): boolean {\n    return !isEmptyObject(this.style)\n  }\n\n  clearStyle(): this {\n    this.style = new Object(null)\n\n    return this\n  }\n\n  toJSON(): string {\n    return JSON.stringify({\n      _text: this._text,\n      style: this.style,\n    })\n  }\n\n  static instance(block: MessageBlock | string, options: MessageBlockOptions = {}): MessageBlock {\n    return block instanceof MessageBlock ? block : new MessageBlock(block, options)\n  }\n}\n\nexport default MessageBlock\n"],"mappings":"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"}