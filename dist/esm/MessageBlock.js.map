{"version":3,"file":"MessageBlock.js","names":["isEmptyObject","MessageBlock","style","Object","create","constructor","text","colors","undefined","Error","_text","fillFromConfig","push","key","value","check","has","color","get","background","marginLeft","marginRight","marginTop","marginBottom","margin","vValue","hValue","padding","offsetLeft","offsetRight","borderRadius","border","width","size","bold","italic","lineHeight","height","image","url","getText","config","bgColor","fontSize","Array","isArray","getStyle","hasStyle","clearStyle","toJSON","JSON","stringify","instance","block","options"],"sources":["../../src/MessageBlock.ts"],"sourcesContent":["import { isEmptyObject } from './utils'\nimport type { ColorValue } from './Color'\nimport ColorCollection from './ColorCollection'\n\nexport interface MessageBlockStyle {\n  [index: string]: any\n\n  color?: ColorValue\n  background?: ColorValue\n}\n\ninterface MessageBlockOptions {\n  colors?: ColorCollection\n}\n\nexport interface MessageBlockConfig {\n  text: string\n  bgColor?: ColorValue | string\n  bold?: boolean\n  borderRadius?: number\n  color?: ColorValue | string\n  fontSize?: number\n  italic?: boolean\n  lineHeight?: number\n  offsetLeft?: number\n  offsetRight?: number\n  marginTop?: number\n  marginBottom?: number\n  padding?: number | [number, number]\n}\n\nclass MessageBlock {\n  private _text?: string\n  private readonly colors?: ColorCollection\n  private style: MessageBlockStyle = Object.create(null)\n\n  constructor(text: string | MessageBlockConfig, { colors }: MessageBlockOptions = Object.create(null)) {\n    this.colors = colors\n    if (text === undefined) {\n      throw Error('Invalid `text` argument for MessageBlock')\n    }\n\n    if (typeof text === 'string') {\n      this._text = text\n    } else {\n      this.fillFromConfig(text)\n    }\n  }\n\n  push(key: string, value?: string, check: boolean = false): this {\n    if (value !== undefined && (!check || !this.has('color'))) {\n      this.style[key] = value\n    }\n\n    return this\n  }\n\n  has(key: string): boolean {\n    return this.style[key] !== undefined\n  }\n\n  color(value?: string, check: boolean = false): this {\n    return this.push('color', (this.colors && this.colors.get(value)) || value, check)\n  }\n\n  background(value?: string, check: boolean = false): this {\n    return this.push('background', (this.colors && this.colors.get(value)) || value, check)\n  }\n\n  marginLeft(value: number, check: boolean = false): this {\n    if (value != 0) {\n      return this.push('margin-left', `${value}px`, check)\n    }\n    return this\n  }\n\n  marginRight(value: number, check: boolean = false): this {\n    if (value != 0) {\n      return this.push('margin-right', `${value}px`, check)\n    }\n    return this\n  }\n\n  marginTop(value: number, check: boolean = false): this {\n    return this.push('margin-top', `${value}px`, check)\n  }\n\n  marginBottom(value: number, check: boolean = false): this {\n    return this.push('margin-bottom', `${value}px`, check)\n  }\n\n  margin(vValue: number, hValue?: number, check: boolean = false): this {\n    let value = vValue === 0 ? '' : `${vValue}px`\n    if (hValue !== undefined) {\n      value += ` ${hValue}px`\n    }\n    return this.push('margin', value, check)\n  }\n\n  padding(vValue: number, hValue?: number, check: boolean = false): this {\n    let value = vValue === 0 ? '' : `${vValue}px`\n    if (hValue !== undefined) {\n      value += ` ${hValue}px`\n    }\n    return this.push('padding', value, check)\n  }\n\n  offsetLeft(value: number, check: boolean = false): this {\n    return this.marginLeft(value * 10, check)\n  }\n\n  offsetRight(value: number, check: boolean = false): this {\n    return this.marginRight(value * 10, check)\n  }\n\n  borderRadius(value: number, check: boolean = false): this {\n    return this.push('border-radius', `${value}px`, check)\n  }\n\n  border(width: number, style: string, color: ColorValue, check: boolean = false): this {\n    return this.push('border', `${width}px ${style} ${color}`, check)\n  }\n\n  size(value: number, check: boolean = false): this {\n    return this.push('font-size', `${value}px`, check)\n  }\n\n  bold(check: boolean = false): this {\n    return this.push('font-weight', 'bold', check)\n  }\n\n  italic(check: boolean = false): this {\n    return this.push('font-style', 'italic', check)\n  }\n\n  lineHeight(value: number, check: boolean = false): this {\n    return this.push('line-height', `${value}px`, check)\n  }\n\n  width(value?: number, check: boolean = false): this {\n    return value ? this.push('width', `${value}px`, check) : this\n  }\n\n  height(value?: number, check: boolean = false): this {\n    return value ? this.push('height', `${value}px`, check) : this\n  }\n\n  image(url: string, width?: number, height?: number): this {\n    return this.push('background-image', `url(${url}}`).push('background-size', `cover`).width(width).height(height)\n  }\n\n  text(value: string): this {\n    this._text = value\n\n    return this\n  }\n\n  getText(): string {\n    return this._text || ''\n  }\n\n  fillFromConfig(config: MessageBlockConfig) {\n    this.text(config.text).background(config.bgColor).color(config.color)\n\n    config.offsetLeft && this.offsetLeft(config.offsetLeft)\n    config.offsetRight && this.offsetRight(config.offsetRight)\n    config.borderRadius && this.borderRadius(config.borderRadius)\n    config.bold && this.bold()\n    config.italic && this.italic()\n    config.fontSize && this.size(config.fontSize)\n    config.lineHeight && this.lineHeight(config.lineHeight)\n    config.marginBottom && this.marginBottom(config.marginBottom)\n    config.marginTop && this.marginTop(config.marginTop)\n\n    if (config.padding) {\n      if (Array.isArray(config.padding)) {\n        this.padding(config.padding[0], config.padding[1])\n      } else {\n        this.padding(config.padding)\n      }\n    }\n  }\n\n  getStyle(): MessageBlockStyle {\n    return this.style\n  }\n\n  hasStyle(): boolean {\n    return !isEmptyObject(this.style)\n  }\n\n  clearStyle(): this {\n    this.style = Object.create(null)\n\n    return this\n  }\n\n  toJSON(): string {\n    return JSON.stringify({\n      _text: this._text,\n      style: this.style,\n    })\n  }\n\n  static instance(\n    block: MessageBlock | MessageBlockConfig | string,\n    options: MessageBlockOptions = Object.create(null)\n  ): MessageBlock {\n    return block instanceof MessageBlock ? block : new MessageBlock(block, options)\n  }\n}\n\nexport default MessageBlock\n"],"mappings":"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"}