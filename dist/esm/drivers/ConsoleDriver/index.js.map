{"version":3,"file":"index.js","names":["ConsoleDriver","_returnResult","output","console","debug","msg","perform","info","log","error","trace","groupCollapsed","groupEnd","type","lines","buildStrings","formatMessage","performLines","returnResult","fmt","fmtStr","fmtArgs","getBlocks","forEach","block","str","args","formatBlock","push","getText","strStyle","style","getStyle","keyStyle"],"sources":["../../../../src/drivers/ConsoleDriver/index.ts"],"sourcesContent":["import Message from '../../Message'\nimport MessageBlock from '../../MessageBlock'\nimport { LoggerDriver } from '../LoggerDriver'\n\nexport interface FormatConsole {\n  fmtStr: string\n  fmtArgs: Array<string>\n}\n\nclass ConsoleDriver implements LoggerDriver {\n  protected _returnResult: boolean = false\n  protected output: Console = console\n\n  debug(msg: Message): string[] | void {\n    return this.perform(msg, 'debug')\n  }\n\n  info(msg: Message): string[] | void {\n    return this.perform(msg, 'info')\n  }\n\n  log(msg: Message): string[] | void {\n    return this.perform(msg, 'log')\n  }\n\n  error(msg: Message): string[] | void {\n    return this.perform(msg, 'error')\n  }\n\n  trace(msg: Message): string[] | void {\n    return this.perform(msg, 'trace')\n  }\n\n  groupCollapsed(msg: Message): string[] | void {\n    return this.perform(msg, 'groupCollapsed')\n  }\n\n  groupEnd(): void {\n    return this.output.groupEnd()\n  }\n\n  protected perform(msg: Message, type: string): string[] | void {\n    const lines = ConsoleDriver.buildStrings(ConsoleDriver.formatMessage(msg))\n\n    return this.performLines(lines, type)\n  }\n\n\n  public performLines(lines: string[], type: string): string[] | void {\n    if (!this._returnResult) {\n      // @ts-ignore\n      this.output[type] ? this.output[type](...lines) : this.output.log(...lines)\n      return\n    }\n\n    this._returnResult = false\n    return lines\n  }\n\n  public returnResult(): this {\n    this._returnResult = true\n\n    return this\n  }\n\n  protected static buildStrings(fmt: FormatConsole): Array<string> {\n    return [fmt.fmtStr, ...fmt.fmtArgs]\n  }\n\n  protected static formatMessage(msg: Message): FormatConsole {\n    let fmtStr: string = ''\n    const fmtArgs: Array<string> = []\n\n    msg.getBlocks().forEach(block => {\n      const { fmtStr: str, fmtArgs: args } = ConsoleDriver.formatBlock(block)\n      fmtStr += str\n      fmtArgs.push(...args)\n    })\n\n    return { fmtStr, fmtArgs }\n  }\n\n  protected static formatBlock(block: MessageBlock): FormatConsole {\n    let fmtStr: string = `%c${block.getText()}`\n    const fmtArgs: Array<string> = []\n    let strStyle = ''\n\n    const style = block.getStyle()\n    for (const keyStyle in style) {\n      strStyle += `${keyStyle}:${style[keyStyle]};`\n    }\n    fmtArgs.push(strStyle)\n\n    return { fmtStr, fmtArgs }\n  }\n}\n\nexport default ConsoleDriver\n"],"mappings":"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"}