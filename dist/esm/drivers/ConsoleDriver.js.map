{"version":3,"sources":["../../../src/drivers/ConsoleDriver.ts"],"names":["ConsoleDriver","debug","msg","perform","info","log","error","trace","type","lines","buildStrings","formatMessage","console","fmt","fmtStr","fmtArgs","getBlocks","forEach","block","str","args","formatBlock","push","getText","strStyle","style","getStyle","keyStyle"],"mappings":"AASA,MAAMA,aAAN,CAA4C;AAC1CC,EAAAA,KAAK,CAACC,GAAD,EAAqB;AACxB,SAAKC,OAAL,CAAaD,GAAb,EAAkB,OAAlB;AACD;;AAEDE,EAAAA,IAAI,CAACF,GAAD,EAAqB;AACvB,SAAKC,OAAL,CAAaD,GAAb,EAAkB,MAAlB;AACD;;AAEDG,EAAAA,GAAG,CAACH,GAAD,EAAqB;AACtB,SAAKC,OAAL,CAAaD,GAAb,EAAkB,KAAlB;AACD;;AAEDI,EAAAA,KAAK,CAACJ,GAAD,EAAqB;AACxB,SAAKC,OAAL,CAAaD,GAAb,EAAkB,OAAlB;AACD;;AAEDK,EAAAA,KAAK,CAACL,GAAD,EAAqB;AACxB,SAAKC,OAAL,CAAaD,GAAb,EAAkB,OAAlB;AACD;;AAESC,EAAAA,OAAO,CAACD,GAAD,EAAeM,IAAf,EAA6B;AAC5C,UAAMC,KAAK,GAAGT,aAAa,CAACU,YAAd,CAA2BV,aAAa,CAACW,aAAd,CAA4BT,GAA5B,CAA3B,CAAd,CAD4C,CAG5C;;AACAU,IAAAA,OAAO,CAACJ,IAAD,CAAP,CAAc,GAAGC,KAAjB,EAJ4C,CAK5C;AACD;;AAE4B,SAAZC,YAAY,CAACG,GAAD,EAAoC;AAC/D,WAAO,CAACA,GAAG,CAACC,MAAL,EAAa,GAAGD,GAAG,CAACE,OAApB,CAAP;AACD;;AAE6B,SAAbJ,aAAa,CAACT,GAAD,EAA8B;AAC1D,QAAIY,MAAc,GAAG,EAArB;AACA,UAAMC,OAAsB,GAAG,EAA/B;AAEAb,IAAAA,GAAG,CAACc,SAAJ,GAAgBC,OAAhB,CAAwBC,KAAK,IAAI;AAC/B,YAAM;AAAEJ,QAAAA,MAAM,EAAEK,GAAV;AAAeJ,QAAAA,OAAO,EAAEK;AAAxB,UAAiCpB,aAAa,CAACqB,WAAd,CAA0BH,KAA1B,CAAvC;AACAJ,MAAAA,MAAM,IAAIK,GAAV;AACAJ,MAAAA,OAAO,CAACO,IAAR,CAAa,GAAGF,IAAhB;AACD,KAJD;AAMA,WAAO;AAAEN,MAAAA,MAAF;AAAUC,MAAAA;AAAV,KAAP;AACD;;AAE2B,SAAXM,WAAW,CAACH,KAAD,EAAqC;AAC/D,QAAIJ,MAAc,GAAI,KAAII,KAAK,CAACK,OAAN,EAAgB,EAA1C;AACA,UAAMR,OAAsB,GAAG,EAA/B;AACA,QAAIS,QAAQ,GAAG,EAAf;AAEA,UAAMC,KAAK,GAAGP,KAAK,CAACQ,QAAN,EAAd;;AACA,SAAK,MAAMC,QAAX,IAAuBF,KAAvB,EAA8B;AAC5BD,MAAAA,QAAQ,IAAK,GAAEG,QAAS,IAAGF,KAAK,CAACE,QAAD,CAAW,GAA3C;AACD;;AACDZ,IAAAA,OAAO,CAACO,IAAR,CAAaE,QAAb;AAEA,WAAO;AAAEV,MAAAA,MAAF;AAAUC,MAAAA;AAAV,KAAP;AACD;;AA1DyC;;AA6D5C,eAAef,aAAf","sourcesContent":["import Message from '../Message'\nimport MessageBlock from '../MessageBlock'\nimport { LoggerDriver } from './LoggerDriver'\n\nexport interface FormatConsole {\n  fmtStr: string\n  fmtArgs: Array<string>\n}\n\nclass ConsoleDriver implements LoggerDriver {\n  debug(msg: Message): void {\n    this.perform(msg, 'debug')\n  }\n\n  info(msg: Message): void {\n    this.perform(msg, 'info')\n  }\n\n  log(msg: Message): void {\n    this.perform(msg, 'log')\n  }\n\n  error(msg: Message): void {\n    this.perform(msg, 'error')\n  }\n\n  trace(msg: Message): void {\n    this.perform(msg, 'trace')\n  }\n\n  protected perform(msg: Message, type: string) {\n    const lines = ConsoleDriver.buildStrings(ConsoleDriver.formatMessage(msg))\n\n    // @ts-ignore\n    console[type](...lines)\n    // console[msg.type ?? type](res[0], ...res[1])\n  }\n\n  protected static buildStrings(fmt: FormatConsole): Array<string> {\n    return [fmt.fmtStr, ...fmt.fmtArgs]\n  }\n\n  protected static formatMessage(msg: Message): FormatConsole {\n    let fmtStr: string = ''\n    const fmtArgs: Array<string> = []\n\n    msg.getBlocks().forEach(block => {\n      const { fmtStr: str, fmtArgs: args } = ConsoleDriver.formatBlock(block)\n      fmtStr += str\n      fmtArgs.push(...args)\n    })\n\n    return { fmtStr, fmtArgs }\n  }\n\n  protected static formatBlock(block: MessageBlock): FormatConsole {\n    let fmtStr: string = `%c${block.getText()}`\n    const fmtArgs: Array<string> = []\n    let strStyle = ''\n\n    const style = block.getStyle()\n    for (const keyStyle in style) {\n      strStyle += `${keyStyle}:${style[keyStyle]};`\n    }\n    fmtArgs.push(strStyle)\n\n    return { fmtStr, fmtArgs }\n  }\n}\n\nexport default ConsoleDriver\n"],"file":"ConsoleDriver.js"}