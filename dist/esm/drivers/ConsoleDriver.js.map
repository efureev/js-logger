{"version":3,"sources":["../../../src/drivers/ConsoleDriver.ts"],"names":["ConsoleDriver","debug","msg","perform","info","log","error","trace","type","lines","buildStrings","formatMessage","console","fmt","fmtStr","fmtArgs","getBlocks","forEach","block","str","args","formatBlock","push","hasStyle","style","getStyle","strStyle","keyStyle","getText"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAWA,MAAMA,aAAN,CAA4C;AAC1CC,EAAAA,KAAK,CAACC,GAAD,EAAqB;AACxB,SAAKC,OAAL,CAAaD,GAAb,EAAkB,OAAlB;AACD;;AAEDE,EAAAA,IAAI,CAACF,GAAD,EAAqB;AACvB,SAAKC,OAAL,CAAaD,GAAb,EAAkB,MAAlB;AACD;;AAEDG,EAAAA,GAAG,CAACH,GAAD,EAAqB;AACtB,SAAKC,OAAL,CAAaD,GAAb,EAAkB,KAAlB;AACD;;AAEDI,EAAAA,KAAK,CAACJ,GAAD,EAAqB;AACxB,SAAKC,OAAL,CAAaD,GAAb,EAAkB,OAAlB;AACD;;AAEDK,EAAAA,KAAK,CAACL,GAAD,EAAqB;AACxB,SAAKC,OAAL,CAAaD,GAAb,EAAkB,OAAlB;AACD;;AAESC,EAAAA,OAAO,CAACD,GAAD,EAAeM,IAAf,EAA6B;AAC5C,UAAMC,KAAK,GAAGT,aAAa,CAACU,YAAd,CAA2BV,aAAa,CAACW,aAAd,CAA4BT,GAA5B,CAA3B,CAAd,CAD4C,CAG5C;;AACAU,IAAAA,OAAO,CAACJ,IAAD,CAAP,CAAc,GAAGC,KAAjB,EAJ4C,CAK5C;AACD;;AAE4B,SAAZC,YAAY,CAACG,GAAD,EAAoC;AAC/D,WAAO,CAACA,GAAG,CAACC,MAAL,EAAa,GAAGD,GAAG,CAACE,OAApB,CAAP;AACD;;AAE6B,SAAbJ,aAAa,CAACT,GAAD,EAA8B;AAC1D,QAAIY,MAAc,GAAG,EAArB;AACA,UAAMC,OAAsB,GAAG,EAA/B;AAEAb,IAAAA,GAAG,CAACc,SAAJ,GAAgBC,OAAhB,CAAwBC,KAAK,IAAI;AAC/B,YAAM;AAAEJ,QAAAA,MAAM,EAAEK,GAAV;AAAeJ,QAAAA,OAAO,EAAEK;AAAxB,UAAiCpB,aAAa,CAACqB,WAAd,CAA0BH,KAA1B,CAAvC;AACAJ,MAAAA,MAAM,IAAIK,GAAV;AACAJ,MAAAA,OAAO,CAACO,IAAR,CAAa,GAAGF,IAAhB;AACD,KAJD;AAMA,WAAO;AAAEN,MAAAA,MAAF;AAAUC,MAAAA;AAAV,KAAP;AACD;;AAE2B,SAAXM,WAAW,CAACH,KAAD,EAAqC;AAC/D,QAAIJ,MAAc,GAAG,EAArB;AACA,UAAMC,OAAsB,GAAG,EAA/B;;AAEA,QAAIG,KAAK,CAACK,QAAN,EAAJ,EAAsB;AACpBT,MAAAA,MAAM,IAAI,IAAV;AAEA,YAAMU,KAAK,GAAGN,KAAK,CAACO,QAAN,EAAd;AACA,UAAIC,QAAQ,GAAG,EAAf;;AACA,WAAK,MAAMC,QAAX,IAAuBH,KAAvB,EAA8B;AAC5BE,QAAAA,QAAQ,IAAK,GAAEC,QAAS,IAAGH,KAAK,CAACG,QAAD,CAAW,GAA3C;AACD;;AACDZ,MAAAA,OAAO,CAACO,IAAR,CAAaI,QAAb;AACD;;AAEDZ,IAAAA,MAAM,IAAI,IAAV;AACAC,IAAAA,OAAO,CAACO,IAAR,CAAaJ,KAAK,CAACU,OAAN,EAAb;AAEA,WAAO;AAAEd,MAAAA,MAAF;AAAUC,MAAAA;AAAV,KAAP;AACD;;AAjEyC;;AAoE5C,eAAef,aAAf","sourcesContent":["/*\nexport const STYLE_INFO = 'color: white; background:blue; padding: 2px 5px;'\nexport const STYLE_PURPLE = 'color: white; background:purple; padding: 2px 5px;'\n\nexport const map = {\n  info: STYLE_INFO,\n  purple: STYLE_PURPLE,\n}\n*/\n\nimport Message from '../Message'\nimport MessageBlock from '../MessageBlock'\nimport { LoggerDriver } from './LoggerDriver'\n\nexport interface FormatConsole {\n  fmtStr: string\n  fmtArgs: Array<string>\n}\n\nclass ConsoleDriver implements LoggerDriver {\n  debug(msg: Message): void {\n    this.perform(msg, 'debug')\n  }\n\n  info(msg: Message): void {\n    this.perform(msg, 'info')\n  }\n\n  log(msg: Message): void {\n    this.perform(msg, 'log')\n  }\n\n  error(msg: Message): void {\n    this.perform(msg, 'error')\n  }\n\n  trace(msg: Message): void {\n    this.perform(msg, 'trace')\n  }\n\n  protected perform(msg: Message, type: string) {\n    const lines = ConsoleDriver.buildStrings(ConsoleDriver.formatMessage(msg))\n\n    // @ts-ignore\n    console[type](...lines)\n    // console[msg.type ?? type](res[0], ...res[1])\n  }\n\n  protected static buildStrings(fmt: FormatConsole): Array<string> {\n    return [fmt.fmtStr, ...fmt.fmtArgs]\n  }\n\n  protected static formatMessage(msg: Message): FormatConsole {\n    let fmtStr: string = ''\n    const fmtArgs: Array<string> = []\n\n    msg.getBlocks().forEach(block => {\n      const { fmtStr: str, fmtArgs: args } = ConsoleDriver.formatBlock(block)\n      fmtStr += str\n      fmtArgs.push(...args)\n    })\n\n    return { fmtStr, fmtArgs }\n  }\n\n  protected static formatBlock(block: MessageBlock): FormatConsole {\n    let fmtStr: string = ''\n    const fmtArgs: Array<string> = []\n\n    if (block.hasStyle()) {\n      fmtStr += '%c'\n\n      const style = block.getStyle()\n      let strStyle = ''\n      for (const keyStyle in style) {\n        strStyle += `${keyStyle}:${style[keyStyle]};`\n      }\n      fmtArgs.push(strStyle)\n    }\n\n    fmtStr += '%s'\n    fmtArgs.push(block.getText())\n\n    return { fmtStr, fmtArgs }\n  }\n}\n\nexport default ConsoleDriver\n"],"file":"ConsoleDriver.js"}